# Оглавление
* [Схема стенда](#scheme)
* [Таблица адресации](#table1)
* [Часть 1. Создание сети и настройка основных параметров устройства](#part1)
* [Часть 2. Настройка и проверка NAT для IPv4](#part2)
* [Часть 3. Настройка и проверка PAT для IPv4](#part3)
* [Часть 4. Настройка и проверка статического NAT для IPv4](#part4)

# <a name="scheme"></a>Схема стенда
![](scheme.png)

# <a name="table1"></a>Таблица адресации
| Устройство    | Интерфейс          | IP-адрес              | Маска подсети   |
| ------------- | :----------------: | :-------------------: | :-------------- |
| R1            | G0/0/0             | 209.165.200.230       | 255.255.255.248 |
|               | G0/0/1             | 192.168.1.1           | 255.255.255.0   |
| R2            | G0/0/0             | 209.165.200.225       | 255.255.255.248 |
|               | Lo1                | 209.165.200.1         | 255.255.255.224 |
| S1            | VLAN 1             | 192.168.1.11          | 255.255.255.0   |
| S2            | VLAN 1             | 192.168.1.12          | 255.255.255.0   |
| PC-A          | NIC                | 192.168.1.2           | 255.255.255.0   |
| PC-B          | NIC                | 192.168.1.3           | 255.255.255.0   |

# <a name="part1"></a>Часть 1. Создание сети и настройка основных параметров устройства
## Шаг 1.1. Создайте сеть согласно топологии.

Выполнено.

## Шаг 1.2. Произведите базовую настройку маршрутизаторов.

Выполнено.

## Шаг 1.3. Настройте базовые параметры каждого коммутатора.

Выполнено.

# <a name="part2"></a>Часть 2. Настройка и проверка NAT для IPv4
## Шаг 2.1. Настройте NAT на R1, используя пул из трех адресов 209.165.200.226-209.165.200.228

```shell
R1(config)#access-list 1 permit 192.168.1.0 0.0.0.255
R1(config)#ip nat pool PUBLIC_ACCESS 209.165.200.226 209.165.200.228 netmask 255.255.255.248
R1(config)#ip nat inside source list 1 pool PUBLIC_ACCESS
R1(config)#interface g0/0/1
R1(config-if)#ip nat inside
R1(config-if)#interface g0/0/0
R1(config-if)#ip nat outside
```

## Шаг 2.2. Проверьте конфигурацию

> 2.2.a. С PC-B,  запустите эхо-запрос интерфейса Lo1 (209.165.200.1) на R2. 
  Если эхо-запрос не прошел, выполните процес поиска и устранения неполадок. 
  На R1 отобразите таблицу NAT на R1 с помощью команды show ip nat translations

```shell
R1#show ip nat translations 
Pro  Inside global     Inside local       Outside local      Outside global
icmp 209.165.200.226:67192.168.1.3:67     209.165.200.1:67   209.165.200.1:67
icmp 209.165.200.226:68192.168.1.3:68     209.165.200.1:68   209.165.200.1:68
icmp 209.165.200.226:69192.168.1.3:69     209.165.200.1:69   209.165.200.1:69
icmp 209.165.200.226:70192.168.1.3:70     209.165.200.1:70   209.165.200.1:70
```

> Во что был транслирован внутренний локальный адрес PC-B?

в 209.165.200.226

> Какой тип адреса NAT является переведенным адресом?

Inside global

> 1.1.a. С PC-A, запустите  эхо-запрос интерфейса Lo1 (209.165.200.1) на R2. 
  Если эхо-запрос не прошел, выполните отладку. 
  На R1 отобразите таблицу NAT на R1 с помощью команды show ip nat translations.

```shell
R1#show ip nat translations 
Pro  Inside global     Inside local       Outside local      Outside global
icmp 209.165.200.226:67192.168.1.3:67     209.165.200.1:67   209.165.200.1:67
icmp 209.165.200.226:68192.168.1.3:68     209.165.200.1:68   209.165.200.1:68
icmp 209.165.200.226:69192.168.1.3:69     209.165.200.1:69   209.165.200.1:69
icmp 209.165.200.226:70192.168.1.3:70     209.165.200.1:70   209.165.200.1:70
icmp 209.165.200.227:21192.168.1.2:21     209.165.200.1:21   209.165.200.1:21
icmp 209.165.200.227:22192.168.1.2:22     209.165.200.1:22   209.165.200.1:22
icmp 209.165.200.227:23192.168.1.2:23     209.165.200.1:23   209.165.200.1:23
icmp 209.165.200.227:24192.168.1.2:24     209.165.200.1:24   209.165.200.1:24
```

> 1.1.b. Обратите внимание, что предыдущая трансляция для PC-B все еще находится в таблице.
  Из S1, эхо-запрос интерфейса Lo1 (209.165.200.1) на R2. 
  Если эхо-запрос не прошел, выполните отладку. 
  На R1 отобразите таблицу NAT на R1 с помощью команды show ip nat translations.

```shell
R1#show ip nat translations 
Pro  Inside global     Inside local       Outside local      Outside global
icmp 209.165.200.226:67192.168.1.3:67     209.165.200.1:67   209.165.200.1:67
icmp 209.165.200.226:68192.168.1.3:68     209.165.200.1:68   209.165.200.1:68
icmp 209.165.200.226:69192.168.1.3:69     209.165.200.1:69   209.165.200.1:69
icmp 209.165.200.226:70192.168.1.3:70     209.165.200.1:70   209.165.200.1:70
icmp 209.165.200.227:21192.168.1.2:21     209.165.200.1:21   209.165.200.1:21
icmp 209.165.200.227:22192.168.1.2:22     209.165.200.1:22   209.165.200.1:22
icmp 209.165.200.227:23192.168.1.2:23     209.165.200.1:23   209.165.200.1:23
icmp 209.165.200.227:24192.168.1.2:24     209.165.200.1:24   209.165.200.1:24
icmp 209.165.200.228:16192.168.1.11:16    209.165.200.1:16   209.165.200.1:16
icmp 209.165.200.228:17192.168.1.11:17    209.165.200.1:17   209.165.200.1:17
icmp 209.165.200.228:18192.168.1.11:18    209.165.200.1:18   209.165.200.1:18
icmp 209.165.200.228:19192.168.1.11:19    209.165.200.1:19   209.165.200.1:19
icmp 209.165.200.228:20192.168.1.11:20    209.165.200.1:20   209.165.200.1:20
```

> 1.1.c. Теперь запускаем пинг R2 Lo1 из S2. 
  На этот раз перевод завершается неудачей, и вы получаете эти сообщения (или аналогичные) на консоли R1

Сообщений таких не вижу (вероятно Packet Tracer их не отображает), но пинг не проходит, т.е. адреса закончились.

```shell
S2#ping 209.165.200.1

Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 209.165.200.1, timeout is 2 seconds:
.....
Success rate is 0 percent (0/5
```

> 1.1.d. Это ожидаемый результат, потому что выделено только 3 адреса, и мы попытались ping Lo1 с четырех устройств.
  Напомним, что NAT — это трансляция «один-в-один». 
  Как много выделено трансляций? 
  Введите команду show ip nat translations verbose , и вы увидите, что ответ будет 24 часа

Packet Tracer не поддерживает show ip nat translations verbose.

> 1.1.e. Учитывая, что пул ограничен тремя адресами, NAT для пула адресов недостаточно для нашего приложения.
  Очистите преобразование NAT и статистику, и мы перейдем к PAT

Выполнено.

# <a name="part3"></a>Часть 3. Настройка и проверка PAT для IPv4

# <a name="part4"></a>Часть 4. Настройка и проверка статического NAT для IPv4
